import{d as q,e as ee,f as R,h as ie}from"./chunk-72IP5246.js";import{$a as m,Aa as d,B as U,Bb as p,Ga as c,N as V,Na as v,Oa as S,Pa as W,Qa as $,R as B,Ra as O,S as Z,Sa as A,Ta as _,Ua as D,Va as s,Wa as a,X as g,Xa as f,Y as C,Ya as h,Za as J,_a as L,ab as l,cb as u,d as j,db as Q,eb as b,fb as E,j as G,pa as K,q as x,qa as Y,qb as X,ra as n,va as N,w as z}from"./chunk-V34KNEZ2.js";function oe(o,t){if(o&1){let i=h();s(0,"div",6)(1,"div",7)(2,"span",8),b(3),a(),s(4,"span",9),b(5),a()(),s(6,"div",10),f(7,"i",11),a(),s(8,"button",12),m("click",function(){g(i);let r=l();return C(r.onLogout())}),f(9,"i",13),a()()}if(o&2){let i=l();n(3),E(i.currentUser.name),n(2),E(i.currentUser.role)}}var w=class o{currentUser=null;isSidebarCollapsed=!1;isMobile=!1;isSidebarOpen=!1;isSidebarHovered=!1;toggleSidebar=new c;logout=new c;onToggleSidebar(){this.toggleSidebar.emit()}onLogout(){this.logout.emit()}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=d({type:o,selectors:[["app-navbar"]],inputs:{currentUser:"currentUser",isSidebarCollapsed:"isSidebarCollapsed",isMobile:"isMobile",isSidebarOpen:"isSidebarOpen",isSidebarHovered:"isSidebarHovered"},outputs:{toggleSidebar:"toggleSidebar",logout:"logout"},decls:7,vars:7,consts:[[1,"navbar"],[1,"navbar-content"],[1,"navbar-left"],[1,"sidebar-toggle",3,"click"],[1,"fas","fa-bars"],[1,"navbar-right"],[1,"user-menu"],[1,"user-info"],[1,"user-name"],[1,"user-role"],[1,"user-avatar"],[1,"fas","fa-user"],["title","Cerrar Sesi\xF3n",1,"logout-btn",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(i,e){i&1&&(s(0,"nav",0)(1,"div",1)(2,"div",2)(3,"button",3),m("click",function(){return e.onToggleSidebar()}),f(4,"i",4),a()(),s(5,"div",5),v(6,oe,10,2,"div",6),a()()()),i&2&&(u("sidebar-collapsed",e.isSidebarCollapsed&&!e.isSidebarHovered)("mobile-sidebar-open",e.isMobile&&e.isSidebarOpen)("desktop-sidebar-hovered",!e.isMobile&&e.isSidebarCollapsed&&e.isSidebarHovered),n(6),S(e.currentUser?6:-1))},dependencies:[p],encapsulation:2})};var M={MOBILE_BREAKPOINT:768,SIDEBAR:{COLLAPSED_WIDTH:"80px",EXPANDED_WIDTH:"280px",ANIMATION_DURATION:"0.3s"},NAVIGATION:{ITEMS:[{route:"/dashboard",icon:"fas fa-tachometer-alt",label:"Dashboard",id:"dashboard"},{route:"/users",icon:"fas fa-users",label:"Usuarios",id:"users"},{route:"/settings",icon:"fas fa-cog",label:"Configuraci\xF3n",id:"settings"}]},APP:{NAME:"Admixion",LOGO_PATH:"./logo.png",FALLBACK_LOGO:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9InVybCgjZ3JhZGllbnQwKSIvPgo8cGF0aCBkPSJNMjAgMTBDMTYuNjg2MyAxMCAxNCAxMi42ODYzIDE0IDE2QzE0IDE5LjMxMzcgMTYuNjg2MyAyMiAyMCAyMkMyMy4zMTM3IDIyIDI2IDE5LjMxMzcgMjYgMTZDMjYgMTIuNjg2MyAyMy4zMTM3IDEwIDIwIDEwWiIgZmlsbD0id2hpdGUiLz4KPHN2Zz4KCg=="},PERFORMANCE:{CHANGE_DETECTION_STRATEGY:"OnPush",ENABLE_LAZY_LOADING:!0,DEBOUNCE_TIME:300,SASS_MODERN_FUNCTIONS:!0},STYLES:{COLOR_ADJUSTMENTS:{DARKEN_HOVER:5,DARKEN_ACTIVE:10,LIGHTEN_HOVER:5},ANIMATIONS:{DURATION_FAST:"0.2s",DURATION_NORMAL:"0.3s",TIMING_FUNCTION:"cubic-bezier(0.4, 0, 0.2, 1)"}}};var I=class o{constructor(t){this.router=t;this.initRouteTracking()}currentRouteSubject=new G("");currentRoute$=this.currentRouteSubject.asObservable();navigationItems=M.NAVIGATION.ITEMS;initRouteTracking(){this.currentRouteSubject.next(this.router.url),this.router.events.pipe(z(t=>t instanceof q),x(t=>t.url),U()).subscribe(t=>this.currentRouteSubject.next(t))}isActiveRoute(t){return this.currentRoute$.pipe(x(i=>i===t),U())}getCurrentRoute(){return this.currentRouteSubject.value}navigateTo(t){return this.router.navigate([t])}getNavigationItemByRoute(t){return this.navigationItems.find(i=>i.route===t)}static \u0275fac=function(i){return new(i||o)(B(R))};static \u0275prov=V({token:o,factory:o.\u0275fac,providedIn:"root"})};function ae(o,t){if(o&1){let i=h();s(0,"div",10),m("click",function(){g(i);let r=l();return C(r.onCloseSidebar())}),a()}}function se(o,t){if(o&1&&(s(0,"span"),b(1),a()),o&2){let i=l();n(),E(i.appName)}}function de(o,t){if(o&1){let i=h();s(0,"button",11),m("click",function(){g(i);let r=l();return C(r.onCloseSidebar())}),f(1,"i",12),a()}}function le(o,t){if(o&1&&(s(0,"span"),b(1),a()),o&2){let i=l().$implicit;n(),E(i.label)}}function pe(o,t){if(o&1){let i=h();s(0,"li",9)(1,"a",13),m("click",function(){let r=g(i).$implicit,y=l();return C(y.onNavigate(r.route))}),f(2,"i"),v(3,le,2,1,"span"),a()()}if(o&2){let i=t.$implicit,e=l();n(),u("active",e.isActiveRoute(i.route)),n(),Q(i.icon),n(),S(e.shouldShowText()?3:-1)}}var H=class o{currentRoute="";isCollapsed=!1;isMobile=!1;isOpen=!0;isHovered=!1;shouldShowExpanded=!0;navigate=new c;closeSidebar=new c;mouseEnter=new c;mouseLeave=new c;navigationService=Z(I);navigationItems=this.navigationService.navigationItems;appName=M.APP.NAME;logoPath=M.APP.LOGO_PATH;fallbackLogo=M.APP.FALLBACK_LOGO;onNavigate(t){this.navigate.emit(t)}onCloseSidebar(){this.closeSidebar.emit()}onImageError(t){console.log("Logo not found, using fallback"),t.target.src=this.fallbackLogo}onMouseEnter(){this.mouseEnter.emit()}onMouseLeave(){this.mouseLeave.emit()}isActiveRoute(t){return this.currentRoute===t}shouldShowText(){return this.isMobile?this.isOpen:this.shouldShowExpanded}trackByRoute(t,i){return i.id}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=d({type:o,selectors:[["app-sidebar"]],inputs:{currentRoute:"currentRoute",isCollapsed:"isCollapsed",isMobile:"isMobile",isOpen:"isOpen",isHovered:"isHovered",shouldShowExpanded:"shouldShowExpanded"},outputs:{navigate:"navigate",closeSidebar:"closeSidebar",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave"},decls:12,vars:10,consts:[[1,"sidebar-overlay","show"],[1,"sidebar",3,"mouseenter","mouseleave"],[1,"sidebar-content"],[1,"sidebar-header"],[1,"logo"],["alt","Logo","loading","lazy",1,"logo-icon",3,"error","src"],[1,"close-btn"],[1,"sidebar-nav"],[1,"nav-list"],[1,"nav-item"],[1,"sidebar-overlay","show",3,"click"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"nav-link",3,"click"]],template:function(i,e){i&1&&(v(0,ae,1,0,"div",0),s(1,"aside",1),m("mouseenter",function(){return e.onMouseEnter()})("mouseleave",function(){return e.onMouseLeave()}),s(2,"div",2)(3,"div",3)(4,"div",4)(5,"img",5),m("error",function(y){return e.onImageError(y)}),a(),v(6,se,2,1,"span"),a(),v(7,de,2,0,"button",6),a(),s(8,"nav",7)(9,"ul",8),W(10,pe,4,5,"li",9,e.trackByRoute,!0),a()()()()),i&2&&(S(e.isMobile&&e.isOpen?0:-1),n(),u("collapsed",e.isCollapsed&&!e.isMobile)("mobile-open",e.isMobile&&e.isOpen)("desktop-hovered",!e.isMobile&&e.isCollapsed&&e.isHovered),n(4),J("src",e.logoPath,K),n(),S(e.shouldShowText()?6:-1),n(),S(e.isMobile&&e.isOpen?7:-1),n(3),$(e.navigationItems))},dependencies:[p],encapsulation:2,changeDetection:0})};var k=class o{isSidebarCollapsed=!1;isSidebarHovered=!1;isMobile=!1;shouldAdjustForExpandedSidebar(){return this.isMobile?!1:!this.isSidebarCollapsed||this.isSidebarHovered}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=d({type:o,selectors:[["app-main-content"]],inputs:{isSidebarCollapsed:"isSidebarCollapsed",isSidebarHovered:"isSidebarHovered",isMobile:"isMobile"},decls:3,vars:4,consts:[[1,"main-content"],[1,"content-wrapper"]],template:function(i,e){i&1&&(A(0,"main",0)(1,"div",1),D(2,"router-outlet"),_()()),i&2&&u("sidebar-collapsed",e.isSidebarCollapsed&&!e.isSidebarHovered&&!e.isMobile)("desktop-sidebar-hovered",!e.isMobile&&e.isSidebarCollapsed&&e.isSidebarHovered)},dependencies:[p,ee],styles:[".main-content[_ngcontent-%COMP%]{margin-top:60px;margin-left:250px;transition:margin-left .3s ease;flex:1}.main-content.sidebar-collapsed[_ngcontent-%COMP%]{margin-left:70px}.main-content.desktop-sidebar-hovered[_ngcontent-%COMP%]{margin-left:250px}.content-wrapper[_ngcontent-%COMP%]{padding:30px;min-height:calc(100vh - 140px)}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{margin-left:0!important;margin-top:60px}}"]})};var F=class o{isSidebarCollapsed=!1;static \u0275fac=function(i){return new(i||o)};static \u0275cmp=d({type:o,selectors:[["app-footer"]],inputs:{isSidebarCollapsed:"isSidebarCollapsed"},decls:4,vars:2,consts:[[1,"footer"],[1,"footer-content"]],template:function(i,e){i&1&&(s(0,"footer",0)(1,"div",1)(2,"p"),b(3,"\xA9 2025 Malec\xF3n M\xE1gico Veracruz. Todos los derechos reservados."),a()()()),i&2&&u("sidebar-collapsed",e.isSidebarCollapsed)},dependencies:[p],encapsulation:2})};var te=class o{constructor(t,i,e,r){this.authService=t;this.router=i;this.navigationService=e;this.cdr=r}currentUser=null;isSidebarCollapsed=!1;isMobile=!1;isSidebarOpen=!1;isSidebarHovered=!1;currentRoute="";routerSubscription=new j;userSubscription=new j;onResize(){this.checkScreenSize()}ngOnInit(){this.checkScreenSize(),this.userSubscription=this.authService.currentUser$.subscribe(t=>{this.currentUser=t,this.cdr.markForCheck()}),this.routerSubscription=this.navigationService.currentRoute$.subscribe(t=>{this.currentRoute=t,this.cdr.markForCheck()})}isActiveRoute(t){return this.currentRoute===t}ngOnDestroy(){this.routerSubscription.unsubscribe(),this.userSubscription.unsubscribe()}checkScreenSize(){this.isMobile=window.innerWidth<=768,this.isMobile?this.isSidebarOpen=!1:this.isSidebarOpen=!0}toggleSidebar(){this.isMobile?this.isSidebarOpen=!this.isSidebarOpen:this.isSidebarCollapsed=!this.isSidebarCollapsed}closeSidebar(){this.isMobile&&(this.isSidebarOpen=!1)}logout(){this.authService.logout()}navigateTo(t){this.navigationService.navigateTo(t),this.isMobile?(this.isSidebarOpen=!1,this.cdr.markForCheck()):this.isSidebarCollapsed&&this.isSidebarHovered&&(this.isSidebarHovered=!1,this.cdr.markForCheck())}onSidebarMouseEnter(){!this.isMobile&&this.isSidebarCollapsed&&(this.isSidebarHovered=!0,this.cdr.markForCheck())}onSidebarMouseLeave(){!this.isMobile&&this.isSidebarCollapsed&&(this.isSidebarHovered=!1,this.cdr.markForCheck())}shouldShowExpandedSidebar(){return this.isMobile?this.isSidebarOpen:!this.isSidebarCollapsed||this.isSidebarHovered}static \u0275fac=function(i){return new(i||o)(N(ie),N(R),N(I),N(X))};static \u0275cmp=d({type:o,selectors:[["app-layout"]],hostBindings:function(i,e){i&1&&L("resize",function(){return e.onResize()},Y)},decls:5,vars:15,consts:[[1,"layout-container"],[3,"toggleSidebar","logout","currentUser","isSidebarCollapsed","isMobile","isSidebarOpen","isSidebarHovered"],[3,"navigate","closeSidebar","mouseEnter","mouseLeave","currentRoute","isCollapsed","isMobile","isOpen","isHovered","shouldShowExpanded"],[3,"isSidebarCollapsed","isSidebarHovered","isMobile"],[3,"isSidebarCollapsed"]],template:function(i,e){i&1&&(A(0,"div",0)(1,"app-navbar",1),L("toggleSidebar",function(){return e.toggleSidebar()})("logout",function(){return e.logout()}),_(),A(2,"app-sidebar",2),L("navigate",function(y){return e.navigateTo(y)})("closeSidebar",function(){return e.closeSidebar()})("mouseEnter",function(){return e.onSidebarMouseEnter()})("mouseLeave",function(){return e.onSidebarMouseLeave()}),_(),D(3,"app-main-content",3)(4,"app-footer",4),_()),i&2&&(n(),O("currentUser",e.currentUser)("isSidebarCollapsed",e.isSidebarCollapsed)("isMobile",e.isMobile)("isSidebarOpen",e.isSidebarOpen)("isSidebarHovered",e.isSidebarHovered),n(),O("currentRoute",e.currentRoute)("isCollapsed",e.isSidebarCollapsed)("isMobile",e.isMobile)("isOpen",e.isSidebarOpen)("isHovered",e.isSidebarHovered)("shouldShowExpanded",e.shouldShowExpandedSidebar()),n(),O("isSidebarCollapsed",e.isSidebarCollapsed)("isSidebarHovered",e.isSidebarHovered)("isMobile",e.isMobile),n(),O("isSidebarCollapsed",e.isSidebarCollapsed))},dependencies:[p,w,H,k,F],encapsulation:2,changeDetection:0})};export{te as LayoutComponent};
