import{d as q,e as ee,f as P,h as ie}from"./chunk-72IP5246.js";import{$a as m,Aa as l,B as G,Bb as c,Ga as S,N as B,Na as b,Oa as g,Pa as W,Qa as $,R as H,Ra as O,S as Z,Sa as A,Ta as _,Ua as D,Va as a,Wa as r,X as f,Xa as v,Y as C,Ya as h,Za as J,_a as R,ab as d,cb as p,d as F,db as Q,eb as u,fb as E,j as z,pa as K,q as U,qa as Y,qb as X,ra as n,va as y,w as V}from"./chunk-V34KNEZ2.js";function oe(o,t){if(o&1){let e=h();a(0,"div",6)(1,"div",7)(2,"span",8),u(3),r(),a(4,"span",9),u(5),r()(),a(6,"div",10),v(7,"i",11),r(),a(8,"button",12),m("click",function(){f(e);let s=d();return C(s.onLogout())}),v(9,"i",13),r()()}if(o&2){let e=d();n(3),E(e.currentUser.name),n(2),E(e.currentUser.role)}}var L=class o{currentUser=null;isSidebarCollapsed=!1;isMobile=!1;isSidebarOpen=!1;toggleSidebar=new S;logout=new S;onToggleSidebar(){this.toggleSidebar.emit()}onLogout(){this.logout.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=l({type:o,selectors:[["app-navbar"]],inputs:{currentUser:"currentUser",isSidebarCollapsed:"isSidebarCollapsed",isMobile:"isMobile",isSidebarOpen:"isSidebarOpen"},outputs:{toggleSidebar:"toggleSidebar",logout:"logout"},decls:7,vars:5,consts:[[1,"navbar"],[1,"navbar-content"],[1,"navbar-left"],[1,"sidebar-toggle",3,"click"],[1,"fas","fa-bars"],[1,"navbar-right"],[1,"user-menu"],[1,"user-info"],[1,"user-name"],[1,"user-role"],[1,"user-avatar"],[1,"fas","fa-user"],["title","Cerrar Sesi\xF3n",1,"logout-btn",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(e,i){e&1&&(a(0,"nav",0)(1,"div",1)(2,"div",2)(3,"button",3),m("click",function(){return i.onToggleSidebar()}),v(4,"i",4),r()(),a(5,"div",5),b(6,oe,10,2,"div",6),r()()()),e&2&&(p("sidebar-collapsed",i.isSidebarCollapsed)("mobile-sidebar-open",i.isMobile&&i.isSidebarOpen),n(6),g(i.currentUser?6:-1))},dependencies:[c],encapsulation:2})};var M={MOBILE_BREAKPOINT:768,SIDEBAR:{COLLAPSED_WIDTH:"80px",EXPANDED_WIDTH:"280px",ANIMATION_DURATION:"0.3s"},NAVIGATION:{ITEMS:[{route:"/dashboard",icon:"fas fa-tachometer-alt",label:"Dashboard",id:"dashboard"},{route:"/users",icon:"fas fa-users",label:"Usuarios",id:"users"},{route:"/settings",icon:"fas fa-cog",label:"Configuraci\xF3n",id:"settings"}]},APP:{NAME:"Admixion",LOGO_PATH:"./logo.png",FALLBACK_LOGO:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9InVybCgjZ3JhZGllbnQwKSIvPgo8cGF0aCBkPSJNMjAgMTBDMTYuNjg2MyAxMCAxNCAxMi42ODYzIDE0IDE2QzE0IDE5LjMxMzcgMTYuNjg2MyAyMiAyMCAyMkMyMy4zMTM3IDIyIDI2IDE5LjMxMzcgMjYgMTZDMjYgMTIuNjg2MyAyMy4zMTM3IDEwIDIwIDEwWiIgZmlsbD0id2hpdGUiLz4KPHN2Zz4KCg=="},PERFORMANCE:{CHANGE_DETECTION_STRATEGY:"OnPush",ENABLE_LAZY_LOADING:!0,DEBOUNCE_TIME:300,SASS_MODERN_FUNCTIONS:!0},STYLES:{COLOR_ADJUSTMENTS:{DARKEN_HOVER:5,DARKEN_ACTIVE:10,LIGHTEN_HOVER:5},ANIMATIONS:{DURATION_FAST:"0.2s",DURATION_NORMAL:"0.3s",TIMING_FUNCTION:"cubic-bezier(0.4, 0, 0.2, 1)"}}};var I=class o{constructor(t){this.router=t;this.initRouteTracking()}currentRouteSubject=new z("");currentRoute$=this.currentRouteSubject.asObservable();navigationItems=M.NAVIGATION.ITEMS;initRouteTracking(){this.currentRouteSubject.next(this.router.url),this.router.events.pipe(V(t=>t instanceof q),U(t=>t.url),G()).subscribe(t=>this.currentRouteSubject.next(t))}isActiveRoute(t){return this.currentRoute$.pipe(U(e=>e===t),G())}getCurrentRoute(){return this.currentRouteSubject.value}navigateTo(t){return this.router.navigate([t])}getNavigationItemByRoute(t){return this.navigationItems.find(e=>e.route===t)}static \u0275fac=function(e){return new(e||o)(H(P))};static \u0275prov=B({token:o,factory:o.\u0275fac,providedIn:"root"})};function ae(o,t){if(o&1){let e=h();a(0,"div",10),m("click",function(){f(e);let s=d();return C(s.onCloseSidebar())}),r()}}function se(o,t){if(o&1&&(a(0,"span"),u(1),r()),o&2){let e=d();n(),E(e.appName)}}function le(o,t){if(o&1){let e=h();a(0,"button",11),m("click",function(){f(e);let s=d();return C(s.onCloseSidebar())}),v(1,"i",12),r()}}function de(o,t){if(o&1&&(a(0,"span"),u(1),r()),o&2){let e=d().$implicit;n(),E(e.label)}}function ce(o,t){if(o&1){let e=h();a(0,"li",9)(1,"a",13),m("click",function(){let s=f(e).$implicit,N=d();return C(N.onNavigate(s.route))}),v(2,"i"),b(3,de,2,1,"span"),r()()}if(o&2){let e=t.$implicit,i=d();n(),p("active",i.isActiveRoute(e.route)),n(),Q(e.icon),n(),g(i.shouldShowText()?3:-1)}}var x=class o{currentRoute="";isCollapsed=!1;isMobile=!1;isOpen=!0;navigate=new S;closeSidebar=new S;navigationService=Z(I);navigationItems=this.navigationService.navigationItems;appName=M.APP.NAME;logoPath=M.APP.LOGO_PATH;fallbackLogo=M.APP.FALLBACK_LOGO;onNavigate(t){this.navigate.emit(t)}onCloseSidebar(){this.closeSidebar.emit()}onImageError(t){console.log("Logo not found, using fallback"),t.target.src=this.fallbackLogo}isActiveRoute(t){return this.currentRoute===t}shouldShowText(){return!this.isCollapsed&&!this.isMobile||this.isMobile&&this.isOpen}trackByRoute(t,e){return e.id}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=l({type:o,selectors:[["app-sidebar"]],inputs:{currentRoute:"currentRoute",isCollapsed:"isCollapsed",isMobile:"isMobile",isOpen:"isOpen"},outputs:{navigate:"navigate",closeSidebar:"closeSidebar"},decls:12,vars:8,consts:[[1,"sidebar-overlay","show"],[1,"sidebar"],[1,"sidebar-content"],[1,"sidebar-header"],[1,"logo"],["alt","Logo","loading","lazy",1,"logo-icon",3,"error","src"],[1,"close-btn"],[1,"sidebar-nav"],[1,"nav-list"],[1,"nav-item"],[1,"sidebar-overlay","show",3,"click"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"nav-link",3,"click"]],template:function(e,i){e&1&&(b(0,ae,1,0,"div",0),a(1,"aside",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"img",5),m("error",function(N){return i.onImageError(N)}),r(),b(6,se,2,1,"span"),r(),b(7,le,2,0,"button",6),r(),a(8,"nav",7)(9,"ul",8),W(10,ce,4,5,"li",9,i.trackByRoute,!0),r()()()()),e&2&&(g(i.isMobile&&i.isOpen?0:-1),n(),p("collapsed",i.isCollapsed&&!i.isMobile)("mobile-open",i.isMobile&&i.isOpen),n(4),J("src",i.logoPath,K),n(),g(i.shouldShowText()?6:-1),n(),g(i.isMobile&&i.isOpen?7:-1),n(3),$(i.navigationItems))},dependencies:[c],encapsulation:2,changeDetection:0})};var k=class o{isSidebarCollapsed=!1;static \u0275fac=function(e){return new(e||o)};static \u0275cmp=l({type:o,selectors:[["app-main-content"]],inputs:{isSidebarCollapsed:"isSidebarCollapsed"},decls:3,vars:2,consts:[[1,"main-content"],[1,"content-wrapper"]],template:function(e,i){e&1&&(A(0,"main",0)(1,"div",1),D(2,"router-outlet"),_()()),e&2&&p("sidebar-collapsed",i.isSidebarCollapsed)},dependencies:[c,ee],styles:[".main-content[_ngcontent-%COMP%]{margin-top:60px;margin-left:250px;transition:margin-left .3s ease;flex:1}.main-content.sidebar-collapsed[_ngcontent-%COMP%]{margin-left:70px}.content-wrapper[_ngcontent-%COMP%]{padding:30px;min-height:calc(100vh - 140px)}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{margin-left:0!important;margin-top:60px}}"]})};var j=class o{isSidebarCollapsed=!1;static \u0275fac=function(e){return new(e||o)};static \u0275cmp=l({type:o,selectors:[["app-footer"]],inputs:{isSidebarCollapsed:"isSidebarCollapsed"},decls:4,vars:2,consts:[[1,"footer"],[1,"footer-content"]],template:function(e,i){e&1&&(a(0,"footer",0)(1,"div",1)(2,"p"),u(3,"\xA9 2025 Malec\xF3n M\xE1gico Veracruz. Todos los derechos reservados."),r()()()),e&2&&p("sidebar-collapsed",i.isSidebarCollapsed)},dependencies:[c],encapsulation:2})};var te=class o{constructor(t,e,i,s){this.authService=t;this.router=e;this.navigationService=i;this.cdr=s}currentUser=null;isSidebarCollapsed=!1;isMobile=!1;isSidebarOpen=!1;currentRoute="";routerSubscription=new F;userSubscription=new F;onResize(){this.checkScreenSize()}ngOnInit(){this.checkScreenSize(),this.userSubscription=this.authService.currentUser$.subscribe(t=>{this.currentUser=t,this.cdr.markForCheck()}),this.routerSubscription=this.navigationService.currentRoute$.subscribe(t=>{this.currentRoute=t,this.cdr.markForCheck()})}isActiveRoute(t){return this.currentRoute===t}ngOnDestroy(){this.routerSubscription.unsubscribe(),this.userSubscription.unsubscribe()}checkScreenSize(){this.isMobile=window.innerWidth<=768,this.isMobile?this.isSidebarOpen=!1:this.isSidebarOpen=!0}toggleSidebar(){this.isMobile?this.isSidebarOpen=!this.isSidebarOpen:this.isSidebarCollapsed=!this.isSidebarCollapsed}closeSidebar(){this.isMobile&&(this.isSidebarOpen=!1)}logout(){this.authService.logout()}navigateTo(t){this.navigationService.navigateTo(t),this.isMobile&&(this.isSidebarOpen=!1,this.cdr.markForCheck())}static \u0275fac=function(e){return new(e||o)(y(ie),y(P),y(I),y(X))};static \u0275cmp=l({type:o,selectors:[["app-layout"]],hostBindings:function(e,i){e&1&&R("resize",function(){return i.onResize()},Y)},decls:5,vars:10,consts:[[1,"layout-container"],[3,"toggleSidebar","logout","currentUser","isSidebarCollapsed","isMobile","isSidebarOpen"],[3,"navigate","closeSidebar","currentRoute","isCollapsed","isMobile","isOpen"],[3,"isSidebarCollapsed"]],template:function(e,i){e&1&&(A(0,"div",0)(1,"app-navbar",1),R("toggleSidebar",function(){return i.toggleSidebar()})("logout",function(){return i.logout()}),_(),A(2,"app-sidebar",2),R("navigate",function(N){return i.navigateTo(N)})("closeSidebar",function(){return i.closeSidebar()}),_(),D(3,"app-main-content",3)(4,"app-footer",3),_()),e&2&&(n(),O("currentUser",i.currentUser)("isSidebarCollapsed",i.isSidebarCollapsed)("isMobile",i.isMobile)("isSidebarOpen",i.isSidebarOpen),n(),O("currentRoute",i.currentRoute)("isCollapsed",i.isSidebarCollapsed)("isMobile",i.isMobile)("isOpen",i.isSidebarOpen),n(),O("isSidebarCollapsed",i.isSidebarCollapsed),n(),O("isSidebarCollapsed",i.isSidebarCollapsed))},dependencies:[c,L,x,k,j],encapsulation:2,changeDetection:0})};export{te as LayoutComponent};
